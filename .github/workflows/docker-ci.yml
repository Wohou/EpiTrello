name: Docker CI

on:
    push:
        branches: [ main, develop ]
    pull_request:
        branches: [ main, develop ]

jobs:
    docker-build:
        runs-on: ubuntu-latest

        steps:
        - name: Checkout code
            uses: actions/checkout@v4

        - name: Set up Docker Buildx
            uses: docker/setup-buildx-action@v3

        - name: Build with Docker Compose
            run: docker-compose build

        - name: Start services
            run: docker-compose up -d

        - name: Check running containers
            run: docker-compose ps

        - name: Stop services
            run: docker-compose down
